<!DOCTYPE html>
<html 
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>
<meta charset="UTF-8">
<title>JPA_TEST</title>

    <!-- ๋ถํธ ์คํธ๋ฉ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</head>
<body>

	<div class="p-5 mb-5 text-center bg-dark-subtle">
		<h1 class="mb-3">My Blog</h1>
		<h4 class="mb-5">ํ์ํฉ๋๋ค.</h4>
		<hr/>
		
		<h2 class="m-3">๐ง ๋ก๊ทธ์ธ ์์ ์๋ณด ์ถ๋ฅ ๐ง</h2>
        <!-- user email -->
        <h3>๐ฉ user email</h3>
         <p sec:authentication="name"></p>
        <!-- 
        <p th:text="${#authentication.name}"></p>
        <p>[[${#authentication.name}]]</p>
         -->
        
        <!-- ์ญํ -->
        <h3>๐ฉ ์ญํ</h3>
        <p th:text="${#authentication.authorities}"></p>
        
        <!-- ๋ก๊ทธ์ธ ์ฌ์ฉ์ ์๋ณด(User ๊ฐ์ฒด) -->
        <h3>๐ฉ ๋ก๊ทธ์ธ ์ฌ์ฉ์ ์๋ณด</h3>
        <p sec:authentication="principal"></p>
        <!-- 
        <p th:text="${#authentication.principal}"></p>
         -->
        
        <!-- ๋ก๊ทธ์ธ ์ฌ๋ถ์ ๋ฐ๋ฅธ ๋ถ๊ธฐ -->
        <h3>๐ฉ ๋ก๊ทธ์ธ ์ฌ๋ถ</h3>
        <p sec:authorize="isAuthenticated()">๋ก๊ทธ์ธ ์ํ์์</p>
        <p sec:authorize="!isAuthenticated()">๋ก๊ทธ์ธ ํด์ฃผ์ธ์.</p>
   
        <!-- ๊ถํ์ ๋ฐ๋ฅธ ๋ถ๊ธฐ -->
        <h3>๐ฉ ๊ถํ</h3>
        <div sec:authorize="hasRole('ROLE_USER')">USER ๊ถํ๋ง ๋ณด์ฌ์</div>
        <div sec:authorize="!hasRole('ROLE_USER')">๋ก๊ทธ์ธํ์ง ์์์ด์</div>
		
	  
		
        <button sec:authorize="isAuthenticated()" 
        class="btn btn-secondary btn-lg mt-3" onclick="location.href='/logout'">๋ก๊ทธ์์</button>       
        
        <button sec:authorize="!isAuthenticated()" 
        class="btn btn-secondary btn-lg mt-3" onclick="location.href='/login'">๋ก๊ทธ์ธ</button>
		
		
	</div>

	<div class="text-center m-3">
    
        <h1 class="m-5">ํ์ ์๋ณด</h1>
    
        <table class="table table-striped">
            <thead>
                <tr>
	                <th>ID</th>
	                <th>์ด๋ฆ</th>
	                <th>์๊ธฐ์๊ฐ</th>
                    <th>๋ก๊ทธ์ธํ์</th>
                    <th>๊ฐ์์ผ</th>
	                <th>์์</th>
	                <th>์ญ์</th>
                </tr>
            </thead>
            
            <tbody>
                <tr th:each="member : ${list}">
                
                    <td th:text="${member.id}"></td>
                    <td th:text="${member.name}" style="font-weight:bold; color:#555; font-size:20px;"></td>
                    <td th:text="${member.info}"></td>
                    <td th:text="${member.loginCount}"></td>
                    <td th:text="${#temporals.format(member.updatedAt, 'yy๋ MM์ dd์ผ')}"></td>
                    <td><a th:href="@{'/blog/edit/' + ${member.id}}" class="btn btn-primary">์์</a></td>
                    <td><a th:href="@{'/blog/delete/' + ${member.id}}" class="btn btn-danger">์ญ์</a></td>
                  
                </tr>
            </tbody>
            
        </table>
        
        
        
        
      
        
        
        
        
        
        <div class="d-flex justify-content-end mt-5">
            
            <div th:if="${not #lists.isEmpty(list)}">
	            <form action="/blog/search">
	                <input name="keyword" placeholder="ํ์ ๊ฒ์" required/>
	                <button class="btn btn-success me-3">๊ฒ์</button>
	            </form>
            </div>
            
            <div th:if="${#lists.isEmpty(list)}">
                <h1>๊ฒ์๋ ํ์์ด ์์ต๋๋ค.</h1>
                <a href="/blog/list" class="btn btn-primary me-3">๋์๊ฐ๊ธฐ</a>
            </div>
                     
            <a href="/join" class="btn btn-primary">ํ์ ์ถ๊ฐ</a>
            
        </div>
    
    
    
    
    </div>


</body>
</html>